import{_ as x}from"./card-5e9a267c.js";import{i as C,k as v}from"./element-plus-269c9c95.js";import{_ as $}from"./pagination.vue_vue_type_script_setup_true_lang-cf2d74a4.js";import{b as B}from"./index-28f279b5.js";import{u as y}from"./useShortVideo-d213b630.js";import{F as b,af as V,o as i,c as l,a as _,b as o,K as r,Q as p,R as z,u as a,P as f,bF as N,S as j,a8 as A,J as h}from"./@vue-fc98776d.js";import{u as E}from"./vue-router-4dc5009b.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./lodash-es-d29772ce.js";import"./async-validator-dee29e8b.js";import"./@vueuse-338b0492.js";import"./@element-plus-828baf85.js";import"./dayjs-2fa04b10.js";import"./@kangc-b0092abd.js";import"./vue-d4d0ec31.js";import"./@sxzz-c75af06c.js";import"./escape-html-9595eff5.js";import"./normalize-wheel-es-ed76fb12.js";import"./@ctrl-f8748455.js";import"./pinia-883c818f.js";import"./vue-demi-71ba0ef2.js";/* empty css                    */import"./@icon-park-3742eccb.js";import"./axios-4a70c6fc.js";import"./prismjs-f5ad2561.js";import"./highlight.js-d90016de.js";import"./vee-validate-30786abe.js";import"./@vee-validate-f9e0ad5b.js";import"./yup-752d7be0.js";import"./property-expr-38205fa5.js";import"./toposort-39c4f588.js";const F={class:"border border-gray-200 rounded-lg bg-white overflow-hidden hover:scale-105 duration-500 hover:border-indigo-200 flex flex-col"},S={class:""},q={class:"mt-3 flex flex-col justify-start"},R={key:0,class:"flex items-center justify-between gap-2 px-5 py-3 border-t"},D=b({__name:"short-video-item",props:{item:{}},emits:["del"],setup(k){const{isAdministrator:d}=B(),{del:u}=y();return(e,t)=>{const c=C,n=V("router-link"),s=v;return i(),l("section",F,[_("div",S,[o(n,{to:{name:"shortvideo.show",params:{id:e.item.id}},target:"_blank"},{default:r(()=>[o(c,{src:e.item.preview,fit:"cover",lazy:!0},null,8,["src"])]),_:1},8,["to"])]),_("div",q,[o(n,{to:{name:"shortvideo.show",params:{id:e.item.id}},class:"font-bold text-gray-700 mb-3 text-lg px-5 truncate hover:text-green-700",target:"_blank"},{default:r(()=>[p(z(e.item.title),1)]),_:1},8,["to"])]),a(d)()?(i(),l("div",R,[o(n,{to:{name:"shortvideo.edit",params:{id:e.item.id}}},{default:r(()=>[o(s,{type:"success",size:"small"},{default:r(()=>[p(" 编辑 ")]),_:1})]),_:1},8,["to"]),o(s,{type:"danger",size:"small",onClick:t[0]||(t[0]=g=>a(u)(e.item.id))},{default:r(()=>[p("删除")]),_:1})])):f("",!0)])}}}),H={class:"flex justify-between items-center"},I={key:0,class:"grid grid-flow-row md:grid-cols-5 lg:grid-cols-6 gap-5"},he=b({__name:"admin",async setup(k){let d,u;const{findAll:e,collection:t}=y(),c=E();return[d,u]=N(()=>e(c.query.page,10)),await d,u(),(n,s)=>{const g=v,w=x;return i(),l("main",null,[o(w,null,{header:r(()=>[_("div",H,[p(" 短视频 "),o(g,{type:"success",size:"default",onClick:s[0]||(s[0]=m=>n.$router.push({name:"shortvideo.create"}))},{default:r(()=>[p(" 添加课程 ")]),_:1})])]),default:r(()=>[a(t)?(i(),l("section",I,[(i(!0),l(j,null,A(a(t).data,m=>(i(),h(D,{key:m.id,item:m},null,8,["item"]))),128))])):f("",!0)]),_:1}),a(t)?(i(),h($,{key:0,per_page:a(t).meta.per_page,total:a(t).meta.total,onCurrentChange:s[1]||(s[1]=m=>n.$router.push({name:"shortvideo.index",query:{page:m}}))},null,8,["per_page","total"])):f("",!0)])}}});export{he as default};
