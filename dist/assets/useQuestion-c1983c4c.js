import{h as r,r as c,c as l}from"./index-28f279b5.js";import{a as s,E as u}from"./element-plus-269c9c95.js";import{r as i}from"./@vue-fc98776d.js";const{open:d}=l(),U=()=>{const o=l(),n=i(),e=i({answer:[],description:"",lists:[{title:""},{title:""}],type:"radio",user:void 0,category:"web",favour_count:0});return{getRelationQuestion:async t=>await r.request({url:`question/relation_question/${t}`}),getAllQuestion:async()=>{n.value=await r.request({url:`question?page=${o.routeQuery("page",1)}`})},model:e,addItem:()=>{if(e.value.lists.length>=4)return s.error("不能超过4个答案");e.value.lists.push({title:""})},removeItem:async t=>{var a;if(e.value.lists.length<=2)return s.error("最少要有两个选项");try{await u.confirm("确定删除吗？","温馨提示"),(a=e.value)==null||a.lists.splice(t,1)}catch{}},setAnswer:t=>{e.value.type!="checkbox"&&(e.value.answer=[],e.value.answer.push(t))},changeType:()=>{e&&(e.value.answer=[])},add:async()=>{const t=e.value.lists.filter(a=>a.title.trim().length);if(e.value.description.length<20)return s.error("问题描述不能少于20个字");if(t.length<2)return s.error("答案不能少于两个");if(e.value.answer.length==0)return s.error("你没有设置正确答案");await r.request({url:"question",method:"POST",data:e.value}),d({name:"question.my"})},collection:n,getUserQuestion:async t=>{n.value=await r.request({url:`question/user_question_list/${t}?page=${o.routeQuery("page",1)}`,method:"GET"})},del:async t=>{try{await u.confirm("确定删除吗？","温馨提示"),await r.request({url:`question/${t}`,method:"DELETE"}),location.reload()}catch{}},find:async t=>await r.request({url:`question/${t}`}),update:async()=>{const t=e.value.lists.filter(a=>a.title.trim().length);if(e.value.description.length<10)return s.error("问题描述不能少于20个字");if(t.length<2)return s.error("答案不能少于两个");if(e.value.answer.length==0)return s.error("你没有设置正确答案");await r.request({url:`question/${e.value.id}`,method:"PUT",data:e.value}),location.href=c.resolve({name:"question.my"}).fullPath},getExamine:async()=>{n.value=await r.request({url:`question/examine?page=${o.routeQuery("page",1)}`,method:"GET"})}}};export{U as u};
