import{_ as j}from"./card-5e9a267c.js";import{_ as M}from"./userAvatar.vue_vue_type_script_setup_true_lang-5d1165fd.js";import{d as x}from"./dayjs-2fa04b10.js";import{u as S}from"./useLearnHistory-7c43fb55.js";import{o as T,u as B}from"./vue-router-4dc5009b.js";import{F as C,bF as L,W as V,af as N,o as s,J as c,K as o,Q as a,a as r,c as y,S as w,a8 as A,u as p,b as n,R as g,d as E,P as d,r as q}from"./@vue-fc98776d.js";import{h as H,i as R,j as D}from"./element-plus-269c9c95.js";import{_ as F}from"./pagination.vue_vue_type_script_setup_true_lang-cf2d74a4.js";import{_ as Q}from"./tip.vue_vue_type_script_setup_true_lang-9a7b2680.js";import{_ as U}from"./topic-item.vue_vue_type_script_setup_true_lang-f6d06ff7.js";import{_ as P}from"./_plugin-vue_export-helper-c27b6911.js";import{h as W}from"./index-28f279b5.js";import{u as G}from"./useTopic-3fadc34b.js";import"./@kangc-b0092abd.js";import"./vue-d4d0ec31.js";import"./lodash-es-d29772ce.js";import"./async-validator-dee29e8b.js";import"./@vueuse-338b0492.js";import"./@element-plus-828baf85.js";import"./@sxzz-c75af06c.js";import"./escape-html-9595eff5.js";import"./normalize-wheel-es-ed76fb12.js";import"./@ctrl-f8748455.js";import"./pinia-883c818f.js";import"./vue-demi-71ba0ef2.js";/* empty css                    */import"./@icon-park-3742eccb.js";import"./axios-4a70c6fc.js";import"./prismjs-f5ad2561.js";import"./highlight.js-d90016de.js";import"./vee-validate-30786abe.js";import"./@vee-validate-f9e0ad5b.js";import"./yup-752d7be0.js";import"./property-expr-38205fa5.js";import"./toposort-39c4f588.js";import"./qs-9ebea5eb.js";import"./side-channel-d24dcd95.js";import"./get-intrinsic-bd2830fd.js";import"./has-symbols-e8f3ca0e.js";import"./has-proto-f7d0b240.js";import"./function-bind-22e7ee79.js";import"./has-26d28e02.js";import"./call-bind-e5c1c8b0.js";import"./object-inspect-acc106ce.js";const J={class:"!-my-5"},K={class:"flex flex-col justify-between"},O={class:"text-gray-800"},X=C({__name:"video-learn-dynamic",async setup(u){let e,i;const{videoDynamics:t}=S(),h=([e,i]=L(()=>t()),e=await e,i(),e),_=setInterval(()=>t(),6e4);return V(()=>clearInterval(_)),T(()=>clearInterval(_)),(l,v)=>{const b=M,k=N("router-link"),$=j;return s(),c($,null,{header:o(()=>[a(" 学习动态 ")]),default:o(()=>[r("div",J,[(s(!0),y(w,null,A(p(h),m=>(s(),y("section",{key:m.id,class:"border-b flex py-3 gap-3 items-stretch"},[n(b,{user:m.user},null,8,["user"]),r("div",K,[n(k,{to:{name:"video.show",params:{id:m.video.id}}},{default:o(()=>[a(g(m.video.title.replace(/^\d+\s*/,"")),1)]),_:2},1032,["to"]),r("small",O,[n(k,{to:{name:"sign.space",query:{uid:m.user.id}}},{default:o(()=>[a(g(m.user.nickname),1)]),_:2},1032,["to"]),a(" "+g(p(x)(m.updated_at).fromNow())+"学习 ",1)])])]))),128))])]),_:1})}}}),Y={key:0,class:"py-5 border-b flex items-center gap-3"},Z={class:"flex flex-col gap-1 justify-between overflow-hidden"},ee=["href"],te={class:"text-sm flex items-center gap-2 font-light"},se={class:"text-xs opacity-90"},oe=C({__name:"activity-item",props:{item:{}},setup(u){const{item:e}=u,i=E(()=>{switch(e.subject_type){case"App\\Models\\Comment":return`/${e.properties.model.toLocaleLowerCase()}/${e.properties.model_id}?commentId=${e.subject_id}`;case"App\\Models\\Lesson":return`/lesson/${e.subject_id}`;case"App\\Models\\Question":return`/question/${e.subject_id}`;case"App\\Models\\Sign":return"/sign";case"App\\Models\\Topic":return`/topic/${e.subject_id}`;case"App\\Models\\System":return`/system/${e.subject_id}`}});return(t,h)=>{const _=M,l=H,v=N("router-link");return t.item.user?(s(),y("main",Y,[n(_,{user:t.item.user},null,8,["user"]),r("div",Z,[r("a",{href:p(i),class:"font-bold opacity-95 truncate"},g(t.item.description),9,ee),r("div",te,[t.item.subject_type=="App\\Models\\Topic"?(s(),c(l,{key:0,type:"danger",size:"small",effect:"dark"},{default:o(()=>[a(" 贴子 ")]),_:1})):d("",!0),t.item.subject_type=="App\\Models\\Lesson"?(s(),c(l,{key:1,type:"success",size:"small",effect:"dark"},{default:o(()=>[a(" 课程 ")]),_:1})):d("",!0),t.item.subject_type=="App\\Models\\Sign"?(s(),c(l,{key:2,type:"warning",size:"small",effect:"dark"},{default:o(()=>[a(" 签到 ")]),_:1})):d("",!0),t.item.subject_type=="App\\Models\\Comment"?(s(),c(l,{key:3,type:"success",size:"small",effect:"dark"},{default:o(()=>[a(" 评论 ")]),_:1})):d("",!0),t.item.subject_type=="App\\Models\\Question"?(s(),c(l,{key:4,type:"success",size:"small",effect:"dark"},{default:o(()=>[a(" 考试题 ")]),_:1})):d("",!0),t.item.subject_type=="App\\Models\\System"?(s(),c(l,{key:5,type:"danger",size:"small",effect:"dark"},{default:o(()=>[a(" 系统课程 ")]),_:1})):d("",!0),n(v,{to:{name:"sign.space",query:{uid:t.item.user.id}},class:"text-indigo-800 font-bold opacity-70"},{default:o(()=>[a(g(t.item.user.nickname),1)]),_:1},8,["to"]),r("span",se,"更新于 "+g(p(x)(t.item.updated_at).fromNow()),1)])])])):d("",!0)}}}),re={},ae=r("div",{class:"font-normal text-base"},"如果你喜欢微信群里交流，加大叔微信",-1),ne={class:"text-center"};function ie(u,e){const i=R,t=j;return s(),c(t,null,{header:o(()=>[a(" 微信群 ")]),default:o(()=>[ae,r("div",ne,[n(i,{src:"/assets/wechat/xj-wechat-qr.jpg",fit:"cover",lazy:!0})])]),_:1})}const ce=P(re,[["render",ie]]),le=()=>{const u=q();return{findAll:async i=>{u.value=await W.request({url:`activity?page=${i}`})},collection:u}},me={class:""},pe={class:"lg:grid lg:grid-cols-12 grid-flow-row gap-3 items-start"},_e={class:"lg:col-span-9"},de={class:"!-my-5"},ue={key:0},fe={class:"lg:w-full lg:col-span-3"},nt=C({__name:"home",async setup(u){let e,i;const t=B(),h=q(+(t.query.page||1)),{collection:_,findAll:l}=le(),{getRecommendList:v}=G(),[b]=([e,i]=L(()=>Promise.all([v(),l(h.value)])),e=await e,i(),e);return(k,$)=>{const m=D,z=j,I=X;return s(),y("div",me,[n(m,{title:"新版网站更新了，如果发现问题请发个贴子说明，我会尽快修复",type:"warning","show-icon":"",closable:!1,class:"!mb-3"}),r("main",pe,[r("section",_e,[n(z,null,{header:o(()=>[a(" 社区动态 ")]),default:o(()=>[r("section",de,[p(h)==1?(s(),y("section",ue,[(s(!0),y(w,null,A(p(b),f=>(s(),c(U,{key:f.id,item:f},null,8,["item"]))),128))])):d("",!0),r("section",null,[(s(!0),y(w,null,A(p(_).data,f=>(s(),c(oe,{key:f.id,item:f},null,8,["item"]))),128))])])]),_:1}),n(F,{per_page:p(_).meta.per_page,total:p(_).meta.total,onCurrentChange:$[0]||($[0]=f=>k.$router.push({name:"home",query:{page:f}}))},null,8,["per_page","total"])]),r("section",fe,[n(Q),n(I,{class:"mt-3"}),n(ce,{class:"mt-3"})])])])}}});export{nt as default};
