import{E as N,l as O,m as T,n as j,o as G,s as J,p as K,k as M,t as Q}from"./element-plus-269c9c95.js";import{_ as X}from"./card-5e9a267c.js";import{_ as q}from"./uploadSingleImage-56a7d3f4.js";import{_ as D}from"./error-c67a23aa.js";import{d as P}from"./vuedraggable-be75e328.js";import{u as W}from"./vue-router-4dc5009b.js";import{u as Y}from"./useLesson-bfa7f628.js";import{u as Z}from"./useVideo-7b027a10.js";import{u as ee}from"./useSystem-924e1e37.js";import{t as oe}from"./@icon-park-3742eccb.js";import{F as te,bF as c,X as le,r as ae,o as f,c as U,b as e,K as t,Q as r,u as n,B as ne,S as se,a8 as ie,a as V,J as pe}from"./@vue-fc98776d.js";import"./lodash-es-d29772ce.js";import"./async-validator-dee29e8b.js";import"./@vueuse-338b0492.js";import"./@element-plus-828baf85.js";import"./dayjs-2fa04b10.js";import"./@kangc-b0092abd.js";import"./vue-d4d0ec31.js";import"./@sxzz-c75af06c.js";import"./escape-html-9595eff5.js";import"./normalize-wheel-es-ed76fb12.js";import"./@ctrl-f8748455.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./useUpload-b067b045.js";import"./index-28f279b5.js";import"./pinia-883c818f.js";import"./vue-demi-71ba0ef2.js";/* empty css                    */import"./axios-4a70c6fc.js";import"./prismjs-f5ad2561.js";import"./highlight.js-d90016de.js";import"./vee-validate-30786abe.js";import"./@vee-validate-f9e0ad5b.js";import"./yup-752d7be0.js";import"./property-expr-38205fa5.js";import"./toposort-39c4f588.js";import"./sortablejs-c04ee0f2.js";import"./qs-9ebea5eb.js";import"./side-channel-d24dcd95.js";import"./get-intrinsic-bd2830fd.js";import"./has-symbols-e8f3ca0e.js";import"./has-proto-f7d0b240.js";import"./function-bind-22e7ee79.js";import"./has-26d28e02.js";import"./call-bind-e5c1c8b0.js";import"./object-inspect-acc106ce.js";const re={class:"p-5 border shadow-sm rounded-md bg-white relative group"},me={class:"-right-2 -top-2 z-10 absolute bg-white cursor-pointer hidden group-hover:block duration-300"},de={class:"p-5"},no=te({__name:"edit",async setup(ue){var v;let s,p;const b=W(),{model:x,findOne:C,update:B}=Y(),{getLessonVideo:F}=Z(),{findAll:g,collection:S}=ee();[s,p]=c(()=>C(+b.params.id)),await s,p();const a=le(x.value);a.videos=([s,p]=c(()=>F(b.params.id)),s=await s,p(),s);const m=ae((v=a.system)==null?void 0:v.type),z=()=>{g(1,{type:m.value})};[s,p]=c(()=>g(1,{type:m.value})),await s,p();const L=y=>{try{N.confirm("确定删除吗","温馨提示").then(()=>{a.videos.splice(a.videos.indexOf(y),1)})}catch{}};return(y,l)=>{const d=O,_=D,i=T,w=j,R=G,$=Q,A=J,H=q,E=K,h=X,I=oe,k=M;return f(),U("main",null,[e(h,null,{header:t(()=>[r(" 编辑课程")]),default:t(()=>[e(E,{"label-width":"80px",inline:!1,"label-position":"top",size:"large",class:"p-5"},{default:t(()=>[e(i,{label:"课程标题",prop:"title"},{default:t(()=>[e(d,{modelValue:n(a).title,"onUpdate:modelValue":l[0]||(l[0]=o=>n(a).title=o),placeholder:"请输入课程标题"},null,8,["modelValue"]),e(_,{name:"title"})]),_:1}),e(i,{label:"所属类别"},{default:t(()=>[e(R,{modelValue:n(m),"onUpdate:modelValue":l[1]||(l[1]=o=>ne(m)?m.value=o:null),onChange:z},{default:t(()=>[e(w,{label:"system"},{default:t(()=>[r(" 系统课程 ")]),_:1}),e(w,{label:"project"},{default:t(()=>[r(" 实战项目 ")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(i,{label:"所属系统课程",prop:"title"},{default:t(()=>[e(A,{modelValue:n(a).system_id,"onUpdate:modelValue":l[2]||(l[2]=o=>n(a).system_id=o),placeholder:"所属系统课程",clearable:"",filterable:""},{default:t(()=>[(f(!0),U(se,null,ie(n(S),o=>(f(),pe($,{key:o.id,label:o.title,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(i,{label:"预览图片"},{default:t(()=>[e(H,{modelValue:n(a).preview,"onUpdate:modelValue":l[3]||(l[3]=o=>n(a).preview=o)},null,8,["modelValue"]),e(_,{name:"preview"})]),_:1}),e(i,{label:"课程简介"},{default:t(()=>[e(d,{type:"textarea",modelValue:n(a).description,"onUpdate:modelValue":l[4]||(l[4]=o=>n(a).description=o),placeholder:"请输入课程的文字介绍"},null,8,["modelValue"]),e(_,{name:"description"})]),_:1})]),_:1})]),_:1}),e(h,{class:"mt-5"},{header:t(()=>[r(" 视频列表 ")]),default:t(()=>[e(n(P),{modelValue:n(a).videos,"onUpdate:modelValue":l[5]||(l[5]=o=>n(a).videos=o),group:"people",onEnd:o=>!1,"item-key":"id",class:"grid grid-cols-4 p-5 gap-5"},{item:t(({element:o})=>[V("div",re,[e(E,{"label-width":"80px",inline:!1,size:"default"},{default:t(()=>[e(i,{label:"视频标题"},{default:t(()=>[e(d,{modelValue:o.title,"onUpdate:modelValue":u=>o.title=u},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(i,{label:"视频地址"},{default:t(()=>[e(d,{modelValue:o.path,"onUpdate:modelValue":u=>o.path=u},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),V("div",me,[e(I,{theme:"outline",size:"20",onClick:u=>L(o)},null,8,["onClick"])])])]),_:1},8,["modelValue"])]),footer:t(()=>[V("div",de,[e(k,{type:"primary",onClick:l[6]||(l[6]=o=>n(B)(n(a)))},{default:t(()=>[r("保存提交")]),_:1}),e(k,{type:"success",onClick:l[7]||(l[7]=o=>n(a).videos.push({title:"",path:""}))},{default:t(()=>[r("添加视频")]),_:1})])]),_:1})])}}});export{no as default};
