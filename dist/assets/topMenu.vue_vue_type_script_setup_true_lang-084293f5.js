import{e as N,f as D,g as B,E as I,h as V}from"./element-plus-269c9c95.js";import{u as q,f as M,c as F,h as L,a as R,d as T}from"./index-28f279b5.js";import{E as U,F as W,G}from"./@icon-park-3742eccb.js";import{F as E,o as t,c as a,S as x,a8 as $,b as l,K as o,J as _,u as c,Q as v,R as g,O as z,P as b,r as C,a as y,d as H,af as S,M as J,_ as K}from"./@vue-fc98776d.js";import{_ as O}from"./_plugin-vue_export-helper-c27b6911.js";import{_ as P,a as Q}from"./userAvatarMenu.vue_vue_type_script_setup_true_lang-ae5e69ee.js";import{d as X}from"./dayjs-2fa04b10.js";import{o as Y,u as Z}from"./vue-router-4dc5009b.js";const ee={class:"grid grid-flow-col content-center justify-items-center justify-around bg-gray-100 border-t border-t-gray-300 py-4 z-10 fixed bottom-0 left-0 right-0 shadow-inner md:hidden"},te={key:0},oe=E({__name:"footerMenu",setup(w){const{open:i}=F(),{user:s}=q();return(d,n)=>{var h;const r=N,u=D,f=B,k=U;return t(),a("main",ee,[(t(!0),a(x,null,$(c(M).navbar,(m,e)=>(t(),a("div",{key:e},[l(f,{trigger:"click",size:"default","hide-on-click":!0},{dropdown:o(()=>[l(u,null,{default:o(()=>[(t(!0),a(x,null,$(m.menus,(p,j)=>(t(),_(r,{key:j,onClick:xe=>p!=null&&p.url?c(i)(p.url,"_blank"):d.$router.push(p.route)},{default:o(()=>[v(g(p.title),1)]),_:2},1032,["onClick"]))),128))]),_:2},1024)]),default:o(()=>[(t(),_(z(m.icon),{theme:"outline",fill:m.color},null,8,["fill"]))]),_:2},1024)]))),128)),(h=c(s))!=null&&h.id?(t(),a("div",te,[l(f,{trigger:"click",size:"default"},{dropdown:o(()=>[l(u,null,{default:o(()=>[l(r,{onClick:n[0]||(n[0]=m=>{var e;return c(i)(`/sign/space?uid=${(e=c(s))==null?void 0:e.id}`)})},{default:o(()=>[v(" 个人空间 ")]),_:1}),l(r,{onClick:n[1]||(n[1]=m=>c(i)("/member"))},{default:o(()=>[v(" 会员中心 ")]),_:1})]),_:1})]),default:o(()=>[l(k,{theme:"outline",fill:"#706fd3"})]),_:1})])):b("",!0)])}}});const je=O(oe,[["__scopeId","data-v-af5ac7d0"]]),A=()=>{const w=C(),i=C();return{findAll:async(r,u="")=>{w.value=await L.request({url:`notification?page=${r}&type=${u}`},{loading:!1})},collection:w,model:i,remove:async r=>{await I({message:"确定删除吗?"}),await L.request({url:`lesson/${r}`,method:"DELETE"})},read:async r=>{await L.request({url:`notification/${r.id}`})}}},ne={class:"flex-1"},se={class:"truncate"},re={class:"text-xs font-light opacity-80"},ae=E({__name:"notification-item",props:{item:{}},setup(w){const{open:i}=F(),{read:s}=A(),d=async n=>{await s(n);const r=n.data.model.toLocaleLowerCase();n.data.type=="comment"&&i(`/${r}/${n.data.model_id}?commentId=${n.data.id}`)};return(n,r)=>(t(),a("main",ne,[y("div",{class:"flex justify-between items-center gap-3 cursor-pointer hover:bg-gray-100",onClick:r[0]||(r[0]=u=>d(n.item))},[y("div",se,g(n.item.data.title),1),y("span",re,g(c(X)(n.item.created_at).fromNow()),1)])]))}}),le={class:"flex items-center"},ce=E({__name:"notification-down",setup(w){const{collection:i,findAll:s}=A();s(1,"unread");const d=setInterval(()=>s(1,"unread"),6e4);return Y(()=>clearInterval(d)),(n,r)=>{var m;const u=W,f=N,k=D,h=B;return t(),a("main",le,[(m=c(i))!=null&&m.data.length?(t(),_(h,{key:0,trigger:"click"},{dropdown:o(()=>[l(k,null,{default:o(()=>[(t(!0),a(x,null,$(c(i).data,e=>(t(),_(f,{key:e.id,class:"border-b border-b-gray-100 text-xs"},{default:o(()=>[l(ae,{item:e},null,8,["item"])]),_:2},1024))),128))]),_:1})]),default:o(()=>[l(u,{theme:"outline",size:"22",class:"text-gray-700 hover:text-gray-500"})]),_:1})):b("",!0)])}}}),ie=["href"],_e=y("a",{href:"javascript:void(0)",class:"text-base"}," 更多功能 ",-1),de=["href"],ue=E({__name:"menu-list",setup(w){Z();const i=C(""),s=C(document.documentElement.clientWidth);window.addEventListener("resize",()=>{s.value=document.documentElement.clientWidth});const d=H(()=>s.value>=1536?10:s.value>=1280?9:s.value>=1024?6:s.value>=768?3:1);return(n,r)=>{const u=V,f=S("router-link"),k=N,h=D,m=B;return t(),a("main",null,[(t(!0),a(x,null,$(c(M).topMenu,(e,p)=>(t(),a(x,null,[p<=c(d)?(t(),a(x,{key:0},[e.route?(t(),_(f,{key:0,to:e.route,class:J(["flex items-center gap-1",{active:c(i)==e.route.name}]),style:K(e.color?`color:${e.color}`:""),onClick:j=>i.value=e.route.name},{default:o(()=>[(t(),_(z(e.icon),{size:"18",fill:"#555"})),v(" "+g(e.title)+" ",1),e.tag?(t(),_(u,{key:0,type:"success",size:"small",effect:"dark"},{default:o(()=>[v(g(e.tag.title),1)]),_:2},1024)):b("",!0)]),_:2},1032,["to","class","style","onClick"])):(t(),a("a",{key:1,href:e.url,target:"_blank",class:"flex items-center"},[(t(),_(z(e.icon),{size:"18",fill:"#555"})),v(" "+g(e.title),1)],8,ie))],64)):b("",!0)],64))),256)),l(m,{trigger:"click",size:"medium"},{dropdown:o(()=>[l(h,null,{default:o(()=>[(t(!0),a(x,null,$(c(M).topMenu,(e,p)=>(t(),a(x,null,[p>c(d)?(t(),_(k,{key:0},{default:o(()=>[e.route?(t(),_(f,{key:0,to:e.route,onClick:j=>i.value=e.route.name,class:"flex gap-2 items-center text-base text-gray-700"},{default:o(()=>[(t(),_(z(e.icon),{size:"18",fill:"#333"})),v(" "+g(e.title),1)]),_:2},1032,["to","onClick"])):(t(),a("a",{key:1,href:e.url,target:"_blank",class:"flex gap-2 items-center text-base text-gray-700"},g(e.title),9,de))]),_:2},1024)):b("",!0)],64))),256))]),_:1})]),default:o(()=>[_e]),_:1})])}}}),me={key:0,class:"flex items-center h-[65px] border-t-4 border-hd-origin border-b border-b-gray-200 bg-white sticky top-0 z-10 shadow-sm"},pe={class:"flex justify-between items-center px-3 w-full 2xl:w-page 2xl:m-auto"},fe={class:"flex flex-col items-center md:flex-row xl:items-center md:mr-6 text-gray-600"},ge={class:"flex flex-row-reverse justify-between items-center"},ye={class:"font-bold font-sans"},he={class:"flex gap-2 items-center"},Le=E({__name:"topMenu",setup(w){const{isLogin:i}=R(),{config:s}=T(),d=C(!0);return document.addEventListener("click",()=>d.value=!0),(n,r)=>{const u=G,f=S("router-link"),k=ce,h=Q;return c(s)?(t(),a("main",me,[y("div",pe,[y("section",fe,[y("div",ge,[l(f,{to:{name:"home"},class:"font-bold items-center justify-between text-xl flex mr-2 text-[#F33A2F]"},{default:o(()=>[l(u,{theme:"outline",size:"28",class:"mr-1 hover:scale-110 duration-300"}),y("span",ye,g(c(s).base.name),1)]),_:1})]),l(ue,{class:"justify-center gap-3 font-bold opacity-95 hidden md:flex"})]),y("section",he,[c(i)()?(t(),_(k,{key:0})):b("",!0),l(h,{class:"hidden 2xl:flex text-gray-700 hover:text-gray-500"}),l(P)])])])):b("",!0)}}});export{Le as _,je as a};
