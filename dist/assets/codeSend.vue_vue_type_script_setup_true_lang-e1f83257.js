import{_ as B}from"./error-c67a23aa.js";import{l as E,k as S}from"./element-plus-269c9c95.js";import{h as b,g as z}from"./index-28f279b5.js";import{d as u}from"./dayjs-2fa04b10.js";import{r as N,F as q,X as R,k as T,o as p,c as $,a as j,b as y,u as o,J as k,K as C,Q as x,R as D}from"./@vue-fc98776d.js";const F=()=>({sendCode:async(e,t)=>{await b.request({url:"code/"+t,method:"POST",data:e})}}),c="interval_exec_time",r=z();let m=0;const _=N(0),H=(n,e)=>{const t=()=>{m=setInterval(()=>{_.value=u(r.get(c)).add(n,"second").diff(u(),"second"),_.value<=0&&(clearInterval(m),m=void 0)},50)},d=async(...l)=>{r.get(c)||(await e.apply(null,l),r.set(c,u(),n),t())};return r.get(c)&&t(),{time:_,exec:d}},J={class:"flex items-center gap-1"},X=q({__name:"codeSend",props:{placeholder:{},code:{},account:{},type:{}},emits:["update:code","update:account"],setup(n){const e=n,{code:t,account:d,type:l}=e,{sendCode:I}=F(),a=R({account:d,code:t});T(()=>e.account,i=>a.account=i);const{exec:V,time:f}=H(60,async()=>{await I(a,l)});return(i,s)=>{const h=E,g=S,w=B;return p(),$("main",null,[j("div",J,[y(h,{modelValue:o(a).code,"onUpdate:modelValue":s[0]||(s[0]=v=>o(a).code=v),onInput:s[1]||(s[1]=v=>i.$emit("update:code",o(a).code)),placeholder:"请输入收到的验证码",size:"large"},null,8,["modelValue"]),o(f)?(p(),k(g,{key:0,disabled:"",size:"large"},{default:C(()=>[x("请"+D(o(f))+"后操作",1)]),_:1})):(p(),k(g,{key:1,type:"danger",size:"large",onClick:o(V)},{default:C(()=>[x("发送验证码")]),_:1},8,["onClick"]))]),y(w,{name:"code"})])}}});export{X as _};
